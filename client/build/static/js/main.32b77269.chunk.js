(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[2],{12:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(35),s=Object(a.b)({name:"UISlice",initialState:{toastData:{isActive:!1,title:void 0,status:void 0},isPageLoading:!1,isLogoutAlertVisible:!1,modalProcess:{active:!1,result:{status:void 0,msg:void 0},loading:{status:!1,msg:void 0}},isModalOpen:!1},reducers:{setToastData:function(e,t){e.toastData.isActive=t.payload.isActive,e.toastData.title=t.payload.title,e.toastData.status=t.payload.status},resetToastData:function(e){e.toastData.isActive=!1,e.toastData.title=void 0,e.toastData.status=void 0},toggleModalVisibility:function(e){e.isModalOpen=!e.isModalOpen},setProcess:function(e,t){if(t.payload.active&&(e.modalProcess.active=t.payload.active),t.payload.loading){var n=t.payload.loading,a=n.status,s=n.msg;e.modalProcess.loading.status=a,e.modalProcess.loading.msg=s}if(t.payload.result){var r=t.payload.result,o=r.status,c=r.msg;e.modalProcess.result.status=o,e.modalProcess.result.msg=c}},resetProcess:function(e){e.modalProcess.active=!1,e.modalProcess.loading.status=!1,e.modalProcess.loading.msg=void 0,e.modalProcess.result.status=void 0,e.modalProcess.result.msg=void 0},setPageLoading:function(e,t){e.isPageLoading=t.payload.isPageLoading},setLogoutAlertVisibility:function(e,t){e.isLogoutAlertVisible=t.payload.isLogoutAlertVisible}}}),r=s.actions;t.b=s.reducer},159:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(26),o=n.n(r),c=n(36),i=n(50),u=n(29),l={baseStyle:{borderBottom:"1px solid pink",pos:"sticky",top:"0",zIndex:"1",backgroundColor:"#E6F4F1",justifyContent:"center",d:"flex",boxShadow:"rgba(67, 71, 85, 0.27) 0px 0px 0.25em, rgba(90, 125, 188, 0.05) 0px 0.25em 1em"},sizes:{},variants:{},defaultProps:{}},d={baseStyle:{backgroundColor:"white",width:{base:"100%",md:"600px"},marginBottom:"40px",mx:"auto",pt:"14px",boxShadow:"rgba(50, 50, 93, 0.25) 0px 6px 12px -2px, rgba(0, 0, 0, 0.3) 0px 3px 7px -3px",rounded:{base:"lg",lg:"lg"},border:{base:"1px solid",lg:"1px solid #ccc"},borderColor:{base:"#EEEEEE"},mt:"10px"},sizes:{},variants:{},defaultProps:{}},f=Object(c.b)({components:{Nav:l,PostBox:d},fonts:{heading:"Inter, sans-serif",body:"Inconsolata, sans-serif"},colors:{heart:{200:"#ED4956"},feedBackground:{200:"#fdf9f5"},navBackground:{300:"#DDF2FF"},navIconColor:{500:"#fff"}}}),b=n(35),p=n(47),g=n(12),j=n(61),m=n(46),h=Object(b.a)({reducer:{auth:p.b,user:m.a,UISlice:g.b,feed:j.a}}),x=n(10),O=n(97),v=n(84),P=n(60),y=n(31),k=(n(159),n(83)),w=n(52),S=n(4);var L=function(){return Object(S.jsx)(k.a,{width:"100%",height:"100vh",pos:"absolute",top:"0",left:"0",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"white",zIndex:"22",children:Object(S.jsx)(w.a,{})})},I=n(98),T=(n(162),function(){return Object(S.jsx)(k.c,{maxWidth:"lg",className:"suggestionsPage",children:Object(S.jsxs)(k.a,{marginY:{base:"2.4rem",lg:"3rem"},children:[Object(S.jsx)(k.g,{size:"xl",textAlign:"center",children:"People you may know"}),Object(S.jsx)(k.a,{marginY:{base:"3rem",md:"3.2rem",lg:"4.4rem"},children:Object(S.jsx)(k.c,{maxWidth:"sm",children:Object(S.jsx)(I.a,{count:10})})})]})})}),U=s.a.lazy((function(){return n.e(5).then(n.bind(null,198))})),D=s.a.lazy((function(){return n.e(6).then(n.bind(null,199))})),E=s.a.lazy((function(){return n.e(9).then(n.bind(null,205))})),A=s.a.lazy((function(){return Promise.all([n.e(1),n.e(10),n.e(16)]).then(n.bind(null,204))})),z=s.a.lazy((function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,206))})),C=s.a.lazy((function(){return Promise.all([n.e(0),n.e(15)]).then(n.bind(null,200))})),N=s.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,201))})),B=s.a.lazy((function(){return Promise.all([n.e(13),n.e(14)]).then(n.bind(null,203))})),F=s.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(7),n.e(8)]).then(n.bind(null,202))}));var R=function(){var e=Object(u.b)(),t=Object(O.a)(),n=Object(x.g)(),s=Object(u.c)((function(e){return e.UISlice})),r=s.isPageLoading,o=s.toastData,c=Object(u.c)((function(e){return e.auth.isLoggedIn})),i=Object(u.c)((function(e){return e.UISlice.modalProcess})),l=i.result.status,d=Object(u.c)((function(e){return e.UISlice.isLogoutAlertVisible})),f=o.isActive;return Object(a.useEffect)((function(){if(!c){var t=Object(P.a)(),a=t.accessToken,s=t.refreshToken;if(!navigator.onLine)return void Object(y.a)(e,{success:!1,msg:"No internet"});a&&s&&(e(g.a.setPageLoading({isPageLoading:!0})),Object(v.a)(e).then((function(t){e(p.a.loginUser()),e(g.a.setPageLoading({isPageLoading:!1}))})).catch((function(t){Object(y.a)(e,{success:!1,msg:"Server Error"}),e(p.a.logoutUser()),e(g.a.setPageLoading({isPageLoading:!1})),n.replace("/login")})))}}),[c]),Object(a.useEffect)((function(){if(f){var n="top-right";window.innerWidth<700&&(n="bottom"),t({title:o.title,status:o.status,position:n,isClosable:!0,duration:2e3,containerStyle:{fontSize:"bottom"===n?"12px":"14px"}})}return function(){e(g.a.resetToastData())}}),[f]),Object(a.useEffect)((function(){void 0!==l&&setTimeout((function(){e(g.a.resetProcess())}),2e3)}),[l,e]),Object(a.useEffect)((function(){window.addEventListener("offline",(function(){Object(y.a)(e,{success:!1,msg:"Connection Lost"})})),window.addEventListener("online",(function(){Object(y.a)(e,{success:!0,msg:"Connected to server"})}))}),[]),console.log("App.js"),Object(S.jsx)("div",{className:"App",children:Object(S.jsxs)(a.Suspense,{fallback:Object(S.jsx)(L,{}),children:[c&&Object(S.jsx)(z,{data:i}),c&&Object(S.jsx)(C,{isOpen:d,onClose:function(){return e(g.a.setLogoutAlertVisibility({isLogoutAlertVisible:!1}))}}),r&&Object(S.jsx)(L,{}),c&&Object(S.jsx)(N,{}),Object(S.jsxs)(x.d,{children:[Object(S.jsx)(x.b,{path:"/login",exact:!0,children:c?Object(S.jsx)(x.a,{to:"/"}):Object(S.jsx)(U,{})}),Object(S.jsx)(x.b,{path:"/register",exact:!0,children:c?Object(S.jsx)(x.a,{to:"/"}):Object(S.jsx)(D,{})}),Object(S.jsx)(x.b,{path:"/profile/:username",children:c?Object(S.jsx)(B,{children:Object(S.jsx)(E,{})}):Object(S.jsx)(D,{})}),Object(S.jsx)(x.b,{path:"/update",exact:!0,children:c?Object(S.jsx)(B,{children:Object(S.jsx)(T,{})}):Object(S.jsx)(D,{})}),Object(S.jsx)(x.b,{path:"/edit-profile",exact:!0,children:c?Object(S.jsx)(B,{children:Object(S.jsx)(A,{})}):Object(S.jsx)(D,{})}),Object(S.jsx)(x.b,{path:"/",children:c?Object(S.jsx)(B,{children:Object(S.jsx)(F,{})}):Object(S.jsx)(U,{})})]})]})})};o.a.render(Object(S.jsx)(u.a,{store:h,children:Object(S.jsx)(i.a,{children:Object(S.jsx)(c.a,{theme:f,children:Object(S.jsx)(R,{})})})}),document.getElementById("root"))},30:function(e,t,n){"use strict";var a=n(8),s=n.n(a),r=n(16),o=n(72),c=n.n(o),i=c.a.create({baseURL:"http://localhost:5000"});i.interceptors.request.use((function(e){var t=localStorage.getItem("accessToken");return t&&(e.headers.authorization="Bearer "+t),e}),(function(e){Promise.reject(e)})),i.interceptors.response.use((function(e){return e}),function(){var e=Object(r.a)(s.a.mark((function e(t){var n,a,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,a=localStorage.getItem("refreshToken"),!(t.response&&401===t.response.status&&t.config&&a)){e.next=16;break}return e.next=5,i({method:"POST",url:"/api/auth/refresh-token",data:{refreshToken:a}});case 5:if(r=e.sent){e.next=8;break}throw new c.a.Cancel;case 8:return e.next=10,r.data;case 10:return o=e.sent,console.log("originalRequest",n),localStorage.setItem("accessToken",o.data.accessToken),localStorage.setItem("refreshToken",o.data.refreshToken),n.headers.authorization="Bearer "+o.data.accessToken,e.abrupt("return",i(n));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.a=i},31:function(e,t,n){"use strict";var a=n(12);t.a=function(e,t){e(a.a.setToastData({isActive:!0,title:t?t.msg:"Something went wrong",status:t?!0===t.success?"success":"warning":"error"}))}},34:function(e,t,n){"use strict";var a=n(12),s={setLoadingProcess:function(e,t){e(a.a.setProcess({active:!0,loading:{status:!0,msg:t}}))},setResultProcess:function(e,t,n){e(a.a.setProcess({active:!0,loading:{status:!1,msg:void 0},result:{status:t,msg:n}}))}};t.a=s},46:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n(35),s=Object(a.b)({name:"User Slice",initialState:{userId:null,userProfileImage:null,userName:null,userFullName:null,bio:void 0},reducers:{setUserData:function(e,t){var n=t.payload,a=n._id,s=n.profileImage,r=n.name,o=n.bio,c=n.username;e.userId=a,e.userFullName=r,e.userProfileImage=s,e.userName=c,e.bio=o},resetUserData:function(e){e.userId=null,e.userProfileImage=null,e.userName=null,e.pageNo=1,e.morePosts=!0,e.timelinePosts=[]},setSuggestedUsers:function(e,t){e.suggestedUsers=t.payload},resetSuggestedUsers:function(e){e.suggestedUsers=void 0}}}),r=s.actions;t.a=s.reducer},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(60),s=n(35),r=Object(s.b)({name:"authSlice",initialState:{isLoggedIn:!1,authBtnLoading:!1},reducers:{loginUser:function(e){e.isLoggedIn=!0},logoutUser:function(e){e.isLoggedIn=!1,Object(a.b)()},setAuthLoadingBtnState:function(e,t){e.authBtnLoading=t.payload}}}),o=r.actions;t.b=r.reducer},60:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a=function(){return{accessToken:localStorage.getItem("accessToken"),refreshToken:localStorage.getItem("refreshToken")}},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a().accessToken,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a().refreshToken;localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",t)},r=function(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},61:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var a=n(77),s=n(35),r=Object(s.b)({name:"Feed Slice",initialState:{pageNo:1,morePosts:!0,timelinePosts:[]},reducers:{setTimelinePosts:function(e,t){e.timelinePosts=[].concat(Object(a.a)(e.timelinePosts),Object(a.a)(t.payload))},setPage:function(e,t){e.pageNo=t.payload.pageNo},incrementPage:function(e){e.pageNo+=1},setMorePostsBoolean:function(e,t){e.morePosts=t.payload},addNewPost:function(e,t){e.timelinePosts.unshift(t.payload)},deletePost:function(e,t){var n=t.payload,a=e.timelinePosts.findIndex((function(e){return e._id===n}));-1===a?console.log("Invalid Operation"):e.timelinePosts.splice(a,1)}}}),o=r.actions;t.a=r.reducer},62:function(e,t,n){"use strict";n.d(t,"f",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return j})),n.d(t,"g",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return x})),n.d(t,"c",(function(){return O}));var a=n(8),s=n.n(a),r=n(51),o=n(16),c=n(30),i=n(34),u=n(31),l=n(47),d=n(61),f=n(12),b=n(46),p=function(e){return function(){var t=Object(o.a)(s.a.mark((function t(n){var a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i.a.setLoadingProcess(n,"Updating your details"),t.next=4,c.a.put("/api/users/update",e);case 4:return a=t.sent,t.next=7,a.data;case 7:o=t.sent,n(b.b.setUserData(Object(r.a)({},o.data))),n(d.b.setMorePostsBoolean(!0)),i.a.setResultProcess(n,!0,"Details Updated"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0),i.a.setResultProcess(n,!1,"Operation failed");case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e,t){return function(){var n=Object(o.a)(s.a.mark((function n(a){var r,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(c.a)({method:"get",url:"/api/posts/allposts/".concat(t)});case 3:return r=n.sent,n.next=6,r.data;case 6:o=n.sent,e(o.data),a(f.a.setPageLoading({isPageLoading:!1})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),Object(u.a)(a);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},j=function(e,t){return function(){var n=Object(o.a)(s.a.mark((function n(a){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i.a.setLoadingProcess(a,"Deleting your account"),n.next=4,Object(c.a)({method:"DELETE",url:"/api/users/"+t,data:{password:e}});case 4:r=n.sent,console.log(r.data),!0===r.data.success&&(i.a.setResultProcess(a,!0,"Account deleted"),a(l.a.logoutUser())),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),i.a.setResultProcess(a,!1,"Invalid credentials");case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},m=function(e,t,n){return function(){var a=Object(o.a)(s.a.mark((function a(r){var o,u;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i.a.setLoadingProcess(r,"Updating your account"),a.next=4,Object(c.a)({method:"PUT",url:"/api/users/"+n+"/update-password",data:{currentPassword:e,newPassword:t}});case 4:o=a.sent,u=o.data,console.log(u),!0===u.success&&i.a.setResultProcess(r,!0,u.msg),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),i.a.setResultProcess(r,!1,"Invalid credentials");case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},h=function(){return function(){var e=Object(o.a)(s.a.mark((function e(t){var n,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)({method:"GET",url:"/api/auth/user",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.data;case 6:a=e.sent,o=a.data,t(b.b.setUserData(Object(r.a)({},o))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Object(u.a)(t,e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},x=function(){return new Promise(function(){var e=Object(o.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)({url:"/api/users/suggested-users",method:"get",headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.data;case 6:r=e.sent,t(r),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),n({success:!1,msg:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}())},O=function(e,t,n,a){return function(){var i=Object(o.a)(s.a.mark((function o(i){var l,d,f;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,n(!0),s.next=4,Object(c.a)({url:"/api/users/".concat(e,"/").concat(t?"un":"","follow"),method:"POST",headers:{"Content-Type":"application/json"}});case 4:if(200===(l=s.sent).status){s.next=7;break}throw new Error(l.error);case 7:return s.next=9,l.data;case 9:d=s.sent,Object(u.a)(i,d),a((function(e){return!e})),n(!1),s.next=21;break;case 15:s.prev=15,s.t0=s.catch(0),console.log(s.t0),f=s.t0.response.data,Object(u.a)(i,Object(r.a)({},f)),n(!1);case 21:case"end":return s.stop()}}),o,null,[[0,15]])})));return function(e){return i.apply(this,arguments)}}()}},84:function(e,t,n){"use strict";var a=n(8),s=n.n(a),r=n(51),o=n(16),c=n(30),i=n(46);t.a=function(e){return new Promise(function(){var t=Object(o.a)(s.a.mark((function t(n,a){var o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(c.a)({method:"get",url:"/api/auth/user"});case 3:if(200!==(o=t.sent).status){t.next=11;break}return console.log(o),t.next=8,o.data;case 8:u=t.sent,e(i.b.setUserData(Object(r.a)({},u.data))),n(u);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a();case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}())}},98:function(e,t,n){"use strict";var a=n(83),s=n(52),r=n(8),o=n.n(r),c=n(16),i=n(45),u=n(0),l=n(62),d=function(){var e=Object(u.useState)(void 0),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(u.useState)(!0),r=Object(i.a)(s,2),d=r[0],f=r[1],b=Object(u.useState)(!1),p=Object(i.a)(b,2),g=p[0],j=p[1];return Object(u.useEffect)((function(){function e(){return(e=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.d)();case 2:!0===(t=e.sent).success?(a(t.data),f(!1)):(j(t.msg),f(!1));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),{suggestedUsers:n,isLoading:d,error:g}},f=n(95),b=n(68),p=n(29),g=n(50),j=n(4),m=function(e){var t=Object(p.b)(),n=Object(u.useState)(!1),s=Object(i.a)(n,2),r=s[0],o=s[1],c=Object(u.useState)(!1),d=Object(i.a)(c,2),m=d[0],h=d[1],x=e.username;return Object(j.jsxs)(a.a,{display:"flex",border:"1px solid maroon",padding:"8px",rounded:"md",minWidth:e.minWidth,pos:"relative",my:"10px",maxWidth:"400px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 2px 8px",children:[Object(j.jsx)(a.a,{mr:"3",children:Object(j.jsx)(g.b,{to:"/profile/".concat(x),children:Object(j.jsx)(b.a,{size:"sm",src:e.src,className:"action-icon"})})}),Object(j.jsx)(g.b,{to:"/profile/".concat(x),children:Object(j.jsx)(a.a,{className:"action-icon",children:e.username})}),Object(j.jsx)(a.a,{marginLeft:"auto",children:Object(j.jsx)(f.a,{size:"xs",backgroundColor:"blue.500",color:"white",_hover:{color:"black"},onClick:function(){t(Object(l.c)(e.userId,m,o,h))},isLoading:r,children:m?"Unfollow":"Follow"})})]})},h=n(96);t.a=function(e){var t=d(),n=t.suggestedUsers,r=t.isLoading,o=t.error,c=void 0,i=void 0;return n&&(i=(c=h.a.first(n,e.count))&&c.map((function(t,n){return Object(j.jsx)(m,{src:t.profileImage,username:t.username,userId:t._id,minWidth:e.minWidth},t+n)}))),r?Object(j.jsx)(a.a,{w:"100%",textAlign:"center",p:"12px",children:Object(j.jsx)(s.a,{})}):o?Object(j.jsx)(a.a,{w:"100%",textAlign:"center",p:"12px"}):i}}},[[163,3,4]]]);
//# sourceMappingURL=main.32b77269.chunk.js.map