(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[8],{172:function(e,t,n){"use strict";n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return b}));var c=n(51),r=n(8),a=n.n(r),s=n(16),o=n(30),i=n(31),l=n(61),u=n(34),p=n(12),x=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u.a.setLoadingProcess(n,"Uploading your post"),o.a.post("/api/posts/newpost",e).then(function(){var e=Object(s.a)(a.a.mark((function e(t){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data;case 2:c=e.sent,u.a.setResultProcess(n,!0,"Post Uploaded"),n(p.a.toggleModalVisibility()),n(l.b.addNewPost(c.data));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),u.a.setResultProcess(n,!1,"Upload Error")}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var c,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.a)({url:"/api/posts/".concat(e,"/like"),method:"POST",headers:{}});case 3:return c=t.sent,console.log(c),t.next=7,c.data;case 7:r=t.sent,console.log(r),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(t){return new Promise(function(){var n=Object(s.a)(a.a.mark((function n(c,r){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u.a.setLoadingProcess(t,"Deleting your post"),n.prev=1,n.next=4,Object(o.a)({url:"/api/posts/".concat(e),method:"DELETE",headers:{}});case 4:if(200!==n.sent.status){n.next=9;break}return t(l.b.deletePost(e)),u.a.setResultProcess(t,!0,"Post Deleted"),n.abrupt("return",c("Post deleted"));case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),u.a.setResultProcess(t,!1,"Operation failed");case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e,t){return n.apply(this,arguments)}}())}},b=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s,l;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(o.a)({method:"delete",url:"/api/comments/".concat(e),headers:{},data:{postId:t}});case 3:return s=n.sent,n.next=6,s.data;case 6:l=n.sent,Object(i.a)(r,Object(c.a)({},l)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),Object(i.a)(r);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}},179:function(e,t,n){"use strict";n(0);var c=n(83),r=n(69),a=n.p+"static/media/Search-amico.72117529.svg",s=n(4);t.a=function(){return Object(s.jsxs)(c.a,{textAlign:"center",paddingX:"20px",paddingY:"28px",maxWidth:"400px",marginX:"auto",children:[Object(s.jsx)(r.a,{src:a}),Object(s.jsx)(c.i,{fontSize:"xl",textAlign:"center",children:"No posts found"})]})}},193:function(e,t,n){},202:function(e,t,n){"use strict";n.r(t);var c=n(83),r=n(0),a=n.n(r),s=n(8),o=n.n(s),i=n(16),l=n(45),u=n(77),p=n(29),x=n(172),d=n(32),j=n(169),b=n(4);var f=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],o=Object(r.useState)("large"),i=Object(l.a)(o,2),u=i[0],p=i[1];return Object(r.useEffect)((function(){return a&&p("small"),function(){s(!1)}}),[a]),Object(b.jsx)(c.a,{marginY:"10px",children:Object(b.jsxs)(c.f,{spacing:"10px",paddingX:"6px",children:[Object(b.jsx)(d.a,{as:e.isLiked?j.b:j.c,h:"30px",w:"30px",className:"action-icon ".concat("small"===u?"action-icon-small":""),onMouseDown:function(){s(!0),e.onLikeButtonClick()},color:"heart.200"}),Object(b.jsx)(d.a,{as:e.commentVisibility?j.e:j.a,h:"30px",w:"30px",className:"action-icon",onClick:e.onCommentButtonClick,color:"purple.500"})]})})},h=n(52),m=n(30),O=n(182),g=n(68),v=n(50);function w(e){var t=Object(p.b)(),n=Object(r.useState)(!1),a=Object(l.a)(n,2),s=a[0],o=a[1],i=e.commentData.userId,u=i.profileImage,d=i.username,j=(i._id,e.commentData),f=j._id,h=j.commentText,m=j.owner;return Object(b.jsxs)(c.a,{padding:"2px",backgroundColor:"white",marginBottom:"2px",d:"flex",mt:"2px",opacity:s?.5:1,children:[Object(b.jsx)(c.a,{padding:"2px",flexBasis:"1",children:Object(b.jsx)(v.b,{to:"/profile/".concat(d),children:Object(b.jsx)(g.a,{height:"16px",width:"16px",name:d,src:u,mr:"4px"})})}),Object(b.jsxs)(c.a,{flexGrow:"10",display:"flex",children:[Object(b.jsx)(v.b,{to:"/profile/".concat(d),children:Object(b.jsx)(c.a,{fontWeight:"semibold",fontSize:{base:"10px",sm:"10px",md:"12px"},padding:"2px",width:"auto",children:d})}),Object(b.jsx)(c.a,{fontSize:{base:"10px",sm:"10px",md:"12px"},padding:"2px",maxWidth:{base:"200px",md:"200px",lg:"400px"},textOverflow:"ellipsis",children:h})]}),m&&Object(b.jsx)(c.a,{onClick:function(){o(!0),t(Object(x.a)(f,e.postId)).then((function(){e.onCommentDelete(f)})).catch((function(){o(!1)}))},children:Object(b.jsx)(c.i,{children:Object(b.jsx)(O.a,{className:"crossDeleteIcon"})})})]})}var k=a.a.memo(w);var C=function(e){var t=Object(r.useState)(),n=Object(l.a)(t,2),a=n[0],s=n[1],p=Object(r.useState)(),x=Object(l.a)(p,2),d=x[0],j=x[1];Object(r.useEffect)((function(){try{var t=function(){var t=Object(i.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j(!0),t.next=3,Object(m.a)({url:"/api/comments/".concat(e.postId,"/all"),method:"get"});case 3:n=t.sent,c=n.data,s(c),j(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}catch(n){console.log(n.message)}}),[]);var f=function(t){var n=Object(u.a)(a),c=n.findIndex((function(e){return e._id===t}));n.splice(c,1),s(n),e.onLatestCommentDelete(t)},O=[];return a&&a!==[]&&(O=a.map((function(t){return Object(b.jsx)(k,{commentData:t,postId:e.postId,onCommentDelete:f},t._id)}))),Object(b.jsx)(c.a,{borderBottom:"1px solid #ccc",borderTop:"1px solid #ccc",mx:{base:"2px",md:"8px"},py:"0px",rounded:"lg",children:d?Object(b.jsx)(c.b,{children:Object(b.jsx)(h.a,{size:"md"})}):O})},y=n(103),S=n(95);var P=function(e){var t=Object(p.c)((function(e){return e.user.userProfileImage})),n=Object(p.c)((function(e){return e.user.userFullname})),a=Object(p.c)((function(e){return e.user})).userName,s=Object(r.useState)(""),u=Object(l.a)(s,2),x=u[0],d=u[1],j=!0;j=""===x;var f=function(){var t=Object(i.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(m.a)({method:"post",url:"/api/comments/".concat(e.postId,"/new"),data:{commentText:x}});case 3:return n=t.sent,t.next=6,n.data;case 6:c=t.sent,e.appendComment(c),d(""),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return Object(b.jsxs)(c.a,{width:"100%",py:"12px",mx:"2px",d:"flex",borderTop:"1px solid #ccc",children:[Object(b.jsx)(c.a,{p:"5px",display:"flex",alignItems:"center",children:Object(b.jsx)(g.a,{size:"xs",name:n,src:t,mr:"4px"})}),Object(b.jsx)(c.a,{p:"8px",fontWeight:"bold",fontSize:{base:"10px",sm:"10px",md:"12px"},width:"auto",flexShrink:"1",d:"flex",justifyContent:"center",alignContent:"center",display:{base:"none",lg:"flex"},overflow:"hidden",maxWidth:"100px",children:a}),Object(b.jsx)(c.a,{padding:"6px",w:"100%",children:Object(b.jsx)(y.a,{variant:"flushed",placeholder:"Add a comment",fontSize:{base:"10px",sm:"10px",md:"12px"},size:"sm",onChange:function(e){return d(e.target.value)},value:x})}),Object(b.jsx)(c.a,{children:Object(b.jsx)(S.a,{color:"blue",textAlign:"center",cursor:"pointer",p:"8px",fontSize:"14px",disabled:j,onClick:f,children:"Post"})})]})},I=n(96);var D=function(e){var t=e.latestComments,n=[];return void 0!==t&&(n=(t=I.a.first(t,4)).reverse().map((function(t){return Object(b.jsx)(k,{postId:e.postId,commentData:t,onCommentDelete:e.onLatestCommentDelete},t._id)}))),Object(b.jsxs)(c.a,{mx:"8px",py:"0px",children:[t&&0!==t.length?Object(b.jsx)(c.i,{fontSize:"xs",mb:"10px",fontWeight:"semibold",children:"Recent comments"}):null,t&&Object(b.jsx)(c.a,{children:n})]})},z=n(111),B=n(110);function L(e){var t=e.postId,n=e.postDeletePossible,c=Object(p.b)(),s=Object(r.useState)(!1),o=Object(l.a)(s,2),i=o[0],u=o[1],j=function(){return u(!1)},f=a.a.useRef();return Object(b.jsxs)(r.Fragment,{children:[Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(B.a,{isOpen:i,leastDestructiveRef:f,onClose:j,children:Object(b.jsx)(B.f,{children:Object(b.jsxs)(B.c,{children:[Object(b.jsx)(B.e,{fontSize:"lg",fontWeight:"bold",children:"Delete Post"}),Object(b.jsx)(B.b,{children:"Are you sure? You can't undo this action afterwards."}),Object(b.jsxs)(B.d,{children:[Object(b.jsx)(S.a,{ref:f,onClick:j,children:"Cancel"}),Object(b.jsx)(S.a,{colorScheme:"red",onClick:function(){c(Object(x.d)(t)).then((function(){u(!1)})).catch((function(){u(!1)}))},ml:3,children:"Delete"})]})]})})})}),Object(b.jsxs)(z.a,{children:[Object(b.jsx)(z.b,{children:Object(b.jsx)(d.a,{as:O.b,fontSize:"20px",className:"action-icon"})}),Object(b.jsxs)(z.d,{children:[n&&Object(b.jsx)(z.c,{onClick:function(){return u(!0)},children:"Delete Post"}),Object(b.jsx)(z.c,{children:"Report"})]})]})]})}var N=function(e){var t=e.username,n=e.userProfileSrc;return Object(b.jsxs)(c.a,{display:"flex",justifyContent:"space-between",px:"6px",py:{base:"4px",md:"8px"},children:[Object(b.jsxs)(c.a,{display:"flex",alignItems:"center",mb:"12px",children:[Object(b.jsx)(g.a,{width:"28px",height:"28px",size:"sm",mr:"16px",className:"action-icon",name:t,src:n}),Object(b.jsx)(v.b,{to:"/profile/".concat(t),children:Object(b.jsx)(c.i,{fontSize:"14px",fontWeight:"500",className:"action-icon",children:t})})]}),Object(b.jsx)(c.a,{className:"action-icon",children:Object(b.jsx)(L,{postId:e.postId,postDeletePossible:e.postDeletePossible})})]})},A=n(109);var _=function(){return Object(b.jsxs)(c.a,{padding:"6",boxShadow:"lg",bg:"white",width:"600px",marginBottom:"40px",height:"600px",mx:"auto",children:[Object(b.jsxs)(c.a,{d:"flex",children:[Object(b.jsx)(A.a,{size:"10"}),Object(b.jsx)(A.b,{mt:"4",ml:"2",width:"100px",noOfLines:1,spacing:"4"})]}),Object(b.jsx)(A.b,{mt:"4",ml:"2",noOfLines:1,spacing:"4"})]})};function E(e){var t=e.imageSrc;return Object(b.jsx)("img",{src:t,className:"timelinePostImage"})}var W=a.a.memo(E),R=n(31),T=function(){var e=Object(i.a)(o.a.mark((function e(t,n,c){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m.a)({url:"/api/comments/".concat(n,"/latest"),method:"get"});case 3:if(!(r=e.sent)){e.next=13;break}if(200!==r.status){e.next=12;break}return e.next=8,r.data;case 8:a=e.sent,c(a),e.next=13;break;case 12:Object(R.a)(t);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n,c){return e.apply(this,arguments)}}(),F=n(3);var M=function(e){var t=Object(F.i)("PostBox");return Object(b.jsx)(c.a,{__css:t,children:e.children})},V=function(e){var t=e.postData,n=Object(p.b)(),a=Object(r.useState)(!0),s=Object(l.a)(a,2),d=s[0],j=s[1],h=Object(r.useState)(void 0),m=Object(l.a)(h,2),O=m[0],g=m[1],v=Object(r.useState)(t.likes.length),w=Object(l.a)(v,2),k=w[0],y=w[1],S=Object(r.useState)(!1),I=Object(l.a)(S,2),z=I[0],B=I[1],L=Object(r.useState)(void 0),A=Object(l.a)(L,2),E=A[0],R=A[1],F=Object(p.c)((function(e){return e.user.userId})),V=t._id,G=t.postDeletePossible,Y=t.userId,X=Y.username,U=Y.profileImage;console.log(U),Object(r.useEffect)((function(){if(void 0===O){var e=t.likes.includes(F);t&&g(e),j(!1)}}),[]),Object(r.useEffect)((function(){var e=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(!0);case 2:return e.next=4,T(n,V,R);case 4:return e.next=6,j(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var J=function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(Object(x.c)(V)),g((function(e){return!e})),y(O?function(e){return e-1}:function(e){return e+1});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},H=function(){B((function(e){return!e}))},q=Object(r.useCallback)((function(e){var t=Object(u.a)(E);t.unshift(e),R(t)})),K=function(e){var t=Object(u.a)(E),n=t.findIndex((function(t){return t._id===e}));-1!==n&&(t.splice(n,1),R(t))},Q=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(c.a,{children:[Object(b.jsx)(N,{username:X,userProfileSrc:U,postId:V,postDeletePossible:G}),Object(b.jsx)(c.a,{fontSize:"14px",px:"6px",py:"4px",children:t.desc}),Object(b.jsx)(c.a,{overflow:"hidden",children:Object(b.jsx)(c.a,{d:"flex",justifyContent:"center",alignItems:"center",children:Object(b.jsx)(W,{imageSrc:t.postImage})})}),Object(b.jsx)(f,{isLiked:O,setIsLiked:g,onLikeButtonClick:J,commentsVisibility:z,onCommentButtonClick:H}),z&&V&&Object(b.jsx)(C,{postId:V,latestComments:E,onLatestCommentDelete:K}),!z&&V&&Object(b.jsx)(D,{postId:V,latestComments:E,onLatestCommentDelete:K})]}),Object(b.jsx)(c.a,{children:Object(b.jsx)(P,{postId:V,appendComment:q})}),Object(b.jsx)(c.a,{marginY:"8px",fontSize:"13px",mx:"10px",children:k>0?"".concat(k," likes"):"No likes"})]})};return Object(b.jsx)(M,{className:"postDataContainer",children:d?Object(b.jsx)(_,{}):Object(b.jsx)(Q,{})})},G=a.a.memo(V),Y=n(61),X=(n(46),function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){var c,r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(m.a)({url:"/api/posts/timeline?page=".concat(e,"&count=3"),method:"GET",headers:{"Content-Type":"application/json"}});case 3:return c=t.sent,t.next=6,c.data;case 6:r=t.sent,0===(a=r.data).length?n(Y.b.setMorePostsBoolean(!1)):n(Y.b.setTimelinePosts(a)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),n(Y.b.setMorePostsBoolean(!1)),Object(R.a)(n);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}),U=n(192),J=n(179),H=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.feed})),n=t.timelinePosts,a=t.morePosts,s=t.page,u=Object(r.useState)(!1),x=Object(l.a)(u,2),d=x[0],j=x[1];Object(r.useEffect)((function(){function t(){return(t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(!0);case 2:return console.log("loadingPosts"),t.next=5,e(X(s));case 5:j(!1);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return!0===a&&function(){t.apply(this,arguments)}(),function(){e(Y.b.setMorePostsBoolean(!1))}}),[s,e,a]);var f=Object(r.useCallback)((function(){e(Y.b.incrementPage())}),[e]);return Object(b.jsxs)(c.a,{flex:"5",marginX:{base:"0px"},bgColor:"feedBackground.200",minHeight:"90vh",children:[Object(b.jsx)(U.a,{dataLength:n.length,next:f,hasMore:a,loader:Object(b.jsx)(_,{}),endMessage:n.length>0?Object(b.jsx)(c.a,{padding:"12px",style:{textAlign:"center"},backgroundColor:"navBackground.200",children:Object(b.jsx)(c.i,{fontSize:"lg",children:"You are all caught up"})}):Object(b.jsx)(J.a,{}),children:n.map((function(e,t){return Object(b.jsx)(G,{postData:e},t+e._id)}))}),d&&Object(b.jsx)(c.a,{display:"flex",justifyContent:"center",children:Object(b.jsx)(h.a,{thickness:"2px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})})]})},q=function(){return Object(b.jsx)(c.a,{pos:"sticky",display:{base:"none",lg:"block"},top:"0",left:"0",height:"100vh",width:{sm:"10px",lg:"250px"},bgColor:"feedBackground.200"})},K=n(12),Q=function(e){var t=e.userData,n=Object(p.b)(),r=Object(p.c)((function(e){return e.user.userProfileImage}));return t?Object(b.jsxs)(c.a,{width:"40vh",background:"whiteAlpha.300",mt:"10px",padding:"10px",rounded:"lg",border:"1px solid #ccc",mb:"24px",d:"flex",bgColor:"white",children:[Object(b.jsxs)(c.a,{d:"flex",flex:"8",alignItems:"center",p:"10px",children:[Object(b.jsx)(g.a,{size:"md",name:t.username,src:r}),Object(b.jsx)(c.a,{height:"fit-content",ml:"14px",children:t.userName})]}),Object(b.jsx)(c.a,{d:"flex",flex:"4",justifyContent:"center",alignItems:"center",children:Object(b.jsx)(S.a,{d:"flex",alignItems:"center",cursor:"pointer",height:"fit-content",padding:"8px 10px",fontSize:"12px",onClick:function(){return n(K.a.setLogoutAlertVisibility({isLogoutAlertVisible:!0}))},outline:"1px solid #ccc",children:"Switch"})})]}):Object(b.jsx)("p",{children:"Loading"})},Z=n(98),$=(n(193),function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.user}));return Object(b.jsxs)(c.a,{flex:"5",height:"94vh",position:"sticky",top:"50px",d:{base:"none",lg:"flex"},flexDirection:"column",paddingLeft:"5vw",className:"RightBarWrapper",bgColor:"feedBackground.200",overflow:"none",children:[Object(b.jsx)(Q,{userData:t}),Object(b.jsxs)(c.a,{width:"40vh",className:"rightBarComponents",flex:"4",rounded:"lg",border:"1px solid #ccc",p:"14px",mb:"24px",display:"flex",flexDirection:"column",bgColor:"white",boxShadow:"rgba(0, 0, 0, 0.15) 0px 2px 8px;",children:[Object(b.jsx)(c.i,{textAlign:"center",fontSize:"20px",mb:"16px",p:"5px",children:"Create a new post"}),Object(b.jsx)(c.a,{display:"flex",justifyContent:"center",alignItems:"center",flexGrow:"1",children:Object(b.jsx)(S.a,{width:"100%",backgroundColor:"blue",color:"white",boxShadow:"0px 2px 5px gray",onClick:function(){e(K.a.toggleModalVisibility())},_hover:{bgGradient:"linear(to-r, #7928CA , #FF0080 )"},_active:{pos:"relative",top:"3px",bgGradient:"linear(to-r, #7928CA , #FF0080)"},children:"Create A Post"})})]}),Object(b.jsxs)(c.a,{borderWidth:"2px",padding:"14px",rounded:"lg",border:"1px solid #ccc",mb:"24px",width:"40vh",className:"rightBarComponents",flex:"6",bgColor:"white",children:[Object(b.jsx)(c.i,{textAlign:"center",fontSize:"20px",mb:"16px",p:"5px",children:"People you may know"}),Object(b.jsx)(Z.a,{count:4})]})]})}),ee=function(){return console.log("feed page rerendered"),Object(b.jsxs)(c.a,{d:"flex",children:[Object(b.jsx)(q,{}),Object(b.jsx)(H,{}),Object(b.jsx)($,{})]})};t.default=a.a.memo(ee)}}]);
//# sourceMappingURL=8.c031f980.chunk.js.map